## 跟你朋友介紹 Git


# git 語法整理
現在我們可能已經建立了很多個城鎮（資料夾），因為很多個了，所以要開始監控它們，這時候就是要使用到 git ，監控魔法的時候了，我們可以監控這個城鎮，並且以某個時間把它存檔下來，如果想要還原的話，就可以回到到個時間的樣子。

順序是： init -> add（廣場） -> commit （王宮）。


## 監控的開始 
從踏入這個城鎮開始。

* 受到我的監控吧
	* 一進到這個城鎮，詠唱 `git init` ，就可以把這個城鎮，納入管理之中。這時候會發現詠唱完了之後，什麼都沒有發生，是不是詠唱失敗了呢？聰明的你開啟魔眼找出害羞的東西，詠唱 `ls -a` 會發現有一個 .git 的東西，那個就是已經有被監控的證據了，換句話說，也是這個 .git 來監控的，所以把這個 .git 刪除的話，那麼監控就會消失。
	* 受到監控其實也沒有什麼用，因為也只是監控而已，什麼也做不到，所以要進入下一個步驟。

## 廣場，存檔的前哨站
這個城鎮被我們監控了，不過有些東西（檔案）流入（新增）流出（刪除），並不是重要的，所以我們就不用理它，如果是重要的事情我們就要加入暫存區（ staging area ），可以想像成是一個廣場，暫時放在那裡，等到很多的時候再一起搬到王宮中。

* 一個個加入到廣場吧
	* 詠唱 `git add 檔案名稱.副檔名` ，就可以把它加入廣場（暫存區），可以等到廣場有很多檔案後，再一次處理。
	* 除了放到廣場外，還有一個功能是可以追蹤它，加入過一次廣場後，之後可以不用放到廣場，可以直接放入王宮，可是如果連一次都沒有放到廣場的話，就一直不是追蹤中，就沒辦法一次放到王宮中。
* 查看我的廣場
	* 詠唱 `git status`，就可以看到廣場（暫存區）有哪些東西。
	* P.S. 如果只是建立資料夾，那麼還不會被 status 看到，要到資料夾裡面再新增一個檔案，才可以被 status 發現喔。
* 某種檔案，一次進入廣場吧
	* 詠唱 `git add *.副檔名` ，就可以把這種副檔名的檔案，通通加入廣場，會方便許多。
* 不管三七二十一，全部進去廣場吧
	* 當然上面的方法也滿快的，不過通常會有各種各樣類型的檔案，所以副檔名還是都會不相同，依然要詠唱很多次，這時候可以詠唱 `git add --all` 或是 `git add -A`，將所有的檔案一次加入到廣場。


## 放入王宮，存檔
要把廣場的東西，放入王宮，才算是真正完成存檔，保存下來。

* 王宮之前
	* 可以先詠唱 `git diff` ，來看看做了哪些更動。
	*  詠唱 `git diff HEAD`，比較現在的分支，跟最新的分支的差異。
* 放入王宮
	* 要詠唱`git commit -m "加入一些說明"`，這樣就可以把廣場（暫存區）的檔案放入王宮（存檔），加入一些說明是要對於這次存檔做一些說明，像是修了什麼 bug ，或是加了什麼更改，這很重要，因為這樣別人才會知道這次存檔，跟上次存檔，哪裡不同？
* 真的有放入王宮嗎？
	* 詠唱 `git log` ，就可以看到檔案放入王宮的編號，可以從這裡確認。
	* 這個是只能看到自己這個分支的情況喔（分支後面會提到）。
	* 想要強大的連同其他分支都看的到話，可以詠唱`git log --graph --full-history --all -- pretty=format:"%h%x09%d%x20%s"`，來看看目前的所有複製體跟時間點，長得怎麼樣。
	* 也可以詠唱 `git log --oneline` ，輸出的內容就是前 7 碼的編號，因為前 7 碼通常不會重複，也夠用了。

* 先放廣場很麻煩？
	* `git commit -am "加入一些說明"`，這樣就可以直接跳過放入廣場（暫存區）這個步驟，直接放入王宮（存檔）。但是要先被 add 過的才可以喔。

* 我想要改最新的 commit 的說明
	* 	詠唱`git commit --amend -m "加入一些說明"`，就可以修改之前的 commit message 。

## 不想要被監視呢？

* 忽略我吧
	* 詠唱 `touch .gitignore` ，建立一個叫做 .gitignore 的檔案，然後可以進入這個檔案，去增加想要忽略的檔案名稱。
	* 詠唱 `vim .gitignore`，進入 vim 編輯器，先按 `i` ，進入輸入模式，然後開始輸入想要逃過監視的檔案名稱，然後按 `esc` ，再按 `:wq` ，再按 `enter`就可以出來了，這樣就是新增要被忽略掉的名單。
	* 可以先新增檔案，然後才在名單是寫上名字，或是先在名單上寫上名字，再新增檔案，兩種都可以。


## 城鎮實驗室
可以創造這個城鎮的複製體，然後去培養它，看看會不會比原來的厲害，如果有比較厲害，就可以再用新的取代舊的。

* 城鎮 2.0 
	* 詠唱 `git branch 分支名稱` ，分支名稱打想要輸入的分支名稱，就可以建立一個城鎮的複製體，等等舊可以開始實驗了。
* 幫現在這個城鎮 2.0 改名字
	* 詠唱 `git branch -m 新的名稱`，新的名稱輸入想要的名字，就可以幫現在這個空改名字。
* 老虎？老鼠？傻傻分不清楚
	*  詠唱 `git branch -v` ，可以看到有幾個版本的城鎮。
* 摧毀城鎮 2.0
	* 詠唱 `git branch -d 分支名稱` ，就可以把這個分支給摧毀掉了。



## 城鎮實驗室－－進階
上面都有做到的話，應該會是有 master ，跟城鎮 2.0 ，兩個分支，每一個分支裡面有會有不同的時間點的存檔。

* 分支跳躍
	* 詠唱 `git checkout master`，就可以回到 master 這個分支的最新時間（最後一個版本）。
	* 詠唱 `git checkout newbranch`，就可以回到以 newbranch 為名字，的這個分支的最新時間（最後一個版本）。
* 時間跳躍
	* 詠唱 `git checkout 版本號` ，就可以回到過去，版本號可以打完整的，也可以輸入 log --oneline 的 7碼版本的，都可以，就會跟你說目前我們回到了過去
	* 如果跳到過去，然後改了檔案也存檔了，這時候會產生一個新的過去？（這樣表達不知道好不好懂）就是屬於 detached HEAD ，但是這個過去並不屬於 master ，也不屬於 2.0 ，如果沒有設定名稱也沒有記住它的版本號的話，之後就找不到它，所以可以幫它設定成一個分支，給他一個名稱，這樣它就可以連結到分支樹裡面了。

* 創造並轉移過去
	* `git checkout -b 名稱`。
* 頭很痛，時空混亂
	* 可以詠唱`git log --graph --full-history --all --pretty=format:"%h%x09%d%x20%s"`，來看看目前的時空圖，長得怎麼樣。
 

## 複製體吸收
培養好新的複製體，我們在主線（ master ），要把其他的分支能量，吸收進來。

* 能量吸收
	* 詠唱 `git merge 分支名稱` ，分支名稱要放想要吸進來的分支名稱，這樣就可以把它的一切吸進來了

## 宇宙崩塌
譬如阿明在第一世界有玩具 A ，但是在第二世界有玩具 B ，在吸收後，系統會覺得怪怪的，所以產生了衝突，到底是要玩具 A 還是 B 呢？這時候就好玩了，我們可以重新設定關於阿明玩具的問題，如果我們喜歡阿明，可以給他 A 跟 B ，如果我們討厭阿明，也可以都不給他。


## 遙遠的那一端 
宇宙有個地方叫做「名人堂」地下城，那裏存著很多有名的地下城鎮，我們可以把自己的城鎮登入上去，到時候就會有很多人來討論。

* 建立連結
	* 到自己的 git hub 點右上頭像旁邊的加號，裡面的 reposity，然後複製網址
	* 先詠唱 `git remote add origin 網址`， github網址，是要放剛剛複製的網址，這樣記可以說等等我要把東西放到這裡喔，前面那個 origin 可以換成任何喜歡的單詞。
* 上傳到遠端
	* 詠唱`git push origin 分支名稱` ，就可以上傳上去。
* 將自己的從遠端下載下來
	* 詠唱`git pull origin 分支名稱`。
*  將別人的複製到自己的電腦上
	*  詠唱`git clone 網址`。
*  將別人的複製到自己的「名人堂」帳號
	*  在「名人堂」使用 fork。





##參考資料：

https://stackoverflow.com/questions/1838873/visualizing-branch-topology-in-git

https://blog.techbridge.cc/2020/04/06/how-to-use-vim-as-an-editor-tutorial/

https://git-scm.com/docs/git-checkout

https://stackoverflow.com/questions/52522565/git-is-not-working-after-macos-update-xcrun-error-invalid-active-developer-pa

